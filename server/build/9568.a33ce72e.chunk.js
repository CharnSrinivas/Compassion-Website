/*! For license information please see 9568.a33ce72e.chunk.js.LICENSE.txt */
(self.webpackChunkserver=self.webpackChunkserver||[]).push([[9568],{699:function(e,t,r){var n;e.exports=(n=r(53547),function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=100)}({0:function(e,t){e.exports=n},100:function(e,t,r){"use strict";r.r(t);var n=r(0);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.default=function(e){return n.createElement("svg",a({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n.createElement("path",{d:"M17 14h-4.34a6 6 0 110-4H23v4h-2v4h-4v-4zM7 14a2 2 0 100-4 2 2 0 000 4z",fill:"#8E8EA9"}))}}}))},87071:(e,t,r)=>{"use strict";var n=r(95318),a=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(53547)),i=r(97132),u=r(79835),l=r(49549),s=n(r(54279)),c=n(r(45697)),d=r(74855),f=n(r(699));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var y=function(e){var t=e.apiToken,r=(0,i.useIntl)().formatMessage,n=(0,u.useNotification)(),a=(0,u.useTracking)().trackUsage,c=(0,o.useRef)(a);return o.default.createElement(u.ContentBox,{endAction:t&&o.default.createElement("span",{style:{alignSelf:"start"}},o.default.createElement(d.CopyToClipboard,{onCopy:function(){c.current("didCopyTokenKey"),n({type:"success",message:{id:"Settings.apiTokens.notification.copied"}})},text:t},o.default.createElement(l.IconButton,{label:r({id:"app.component.CopyToClipboard.label",defaultMessage:"Copy to clipboard"}),noBorder:!0,icon:o.default.createElement(s.default,null),style:{padding:0,height:"1rem"}}))),title:t||r({id:"Settings.apiTokens.copy.editTitle",defaultMessage:"This token isn\u2019t accessible anymore."}),subtitle:r(t?{id:"Settings.apiTokens.copy.lastWarning",defaultMessage:"Make sure to copy this token, you won\u2019t be able to see it again!"}:{id:"Settings.apiTokens.copy.editMessage",defaultMessage:"For security reasons, you can only see your token once."}),icon:o.default.createElement(f.default,null),iconBackground:"neutral100"})};y.defaultProps={apiToken:null},y.propTypes={apiToken:c.default.string};var v=y;t.default=v},9461:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(53547)),o=r(79835),i=r(35395),u=r(80117),l=r(64459),s=n(r(22754)),c=r(97132),d=n(r(45697)),f=function(e){var t=e.apiTokenName,r=(0,c.useIntl)().formatMessage;return(0,o.useFocusWhenNavigate)(),a.default.createElement(u.Main,{"aria-busy":"true"},a.default.createElement(o.SettingsPageTitle,{name:"API Tokens"}),a.default.createElement(i.HeaderLayout,{primaryAction:a.default.createElement(l.Button,{disabled:!0,startIcon:a.default.createElement(s.default,null),type:"button",size:"L"},r({id:"form.button.save",defaultMessage:"Save"})),title:t||r({id:"Settings.apiTokens.createPage.title",defaultMessage:"Create API Token"})}),a.default.createElement(i.ContentLayout,null,a.default.createElement(o.LoadingIndicatorPage,null)))};f.defaultProps={apiTokenName:null},f.propTypes={apiTokenName:d.default.string};var p=f;t.default=p},91486:(e,t,r)=>{"use strict";var n=r(95318),a=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(48926)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(53547)),u=r(97132),l=r(79835),s=r(35395),c=r(80117),d=r(64459),f=n(r(22754)),p=n(r(87760)),y=r(56156),v=r(80831),h=r(9524),g=r(94117),m=r(33483),k=r(39272),b=r(99136),w=r(78607),E=r(2632),T=n(r(27361)),O=r(39711),x=r(23724),M=r(26595),j=r(53777),P=n(r(93004)),L=n(r(9461)),S=n(r(87071));function _(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function I(){I=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(j){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return M()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}e.wrap=s;var d={};function f(){}function p(){}function y(){}var v={};l(v,o,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(x([])));g&&g!==t&&r.call(g,o)&&(v=g);var m=y.prototype=f.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,u,l){var s=c(e[o],e,i);if("throw"!==s.type){var d=s.arg,f=d.value;return f&&"object"==a(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,l)}),(function(e){n("throw",e,u,l)})):t.resolve(f).then((function(e){d.value=e,u(d)}),(function(e){return n("throw",e,u,l)}))}l(s.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=y,l(m,"constructor",y),l(y,"constructor",p),p.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},k(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(m),l(m,u,"Generator"),l(m,o,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var C=function(){var e,t,r,n,a;(0,l.useFocusWhenNavigate)();var _=(0,u.useIntl)().formatMessage,C=(0,l.useOverlayBlocker)(),N=C.lockApp,A=C.unlockApp,B=(0,l.useNotification)(),F=(0,O.useHistory)(),G=(0,l.useTracking)().trackUsage,W=(0,i.useRef)(G),D=(0,l.useGuidedTour)().setCurrentStep,z=(0,O.useRouteMatch)("/settings/api-tokens/:id").params.id,R="create"===z;(0,i.useEffect)((function(){W.current(R?"didAddTokenFromList":"didEditTokenFromList")}),[R]),null!==(e=F.location.state)&&void 0!==e&&e.apiToken.accessKey&&(a=F.location.state.apiToken);var q=(0,x.useQuery)(["api-token",z],(0,o.default)(I().mark((function e(){var t,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.axiosInstance.get("/admin/api-tokens/".concat(z));case 2:return t=e.sent,r=t.data.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),{enabled:!R&&!a,onError:function(){B({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),H=q.status,K=q.data;K&&(a=K);var U,Y=function(){var e=(0,o.default)(I().mark((function e(t,r){var n,o,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.current(R?"willCreateToken":"willEditToken"),N(),e.prev=2,!R){e.next=9;break}return e.next=6,j.axiosInstance.post("/admin/api-tokens",t);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,j.axiosInstance.put("/admin/api-tokens/".concat(z),t);case 11:e.t0=e.sent;case 12:n=e.t0,o=n.data.data,a=o,B({type:"success",message:_({id:"notification.success.saved",defaultMessage:"Saved"})}),W.current(R?"didCreateToken":"didEditToken",{type:a.type}),R&&(F.replace("/settings/api-tokens/".concat(o.id),{apiToken:o}),D("apiTokens.success")),e.next=25;break;case 20:e.prev=20,e.t1=e.catch(2),i=(0,M.formatAPIErrors)(e.t1.response.data),r.setErrors(i),B({type:"warning",message:(0,T.default)(e.t1,"response.data.message","notification.error")});case 25:A();case 26:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,r){return e.apply(this,arguments)}}();return R||a||"success"===H?i.default.createElement(c.Main,null,i.default.createElement(l.SettingsPageTitle,{name:"API Tokens"}),i.default.createElement(v.Formik,{validationSchema:P.default,validateOnChange:!1,initialValues:{name:(null===(t=a)||void 0===t?void 0:t.name)||"",description:(null===(r=a)||void 0===r?void 0:r.description)||"",type:(null===(n=a)||void 0===n?void 0:n.type)||"read-only"},onSubmit:Y},(function(e){var t,r,n,o,u,c=e.errors,v=e.handleChange,T=e.isSubmitting,O=e.values;return i.default.createElement(l.Form,null,i.default.createElement(s.HeaderLayout,{title:(null===(t=a)||void 0===t?void 0:t.name)||_({id:"Settings.apiTokens.createPage.title",defaultMessage:"Create API Token"}),primaryAction:i.default.createElement(d.Button,{disabled:T,loading:T,startIcon:i.default.createElement(f.default,null),type:"submit",size:"L"},_({id:"app.components.Button.save",defaultMessage:"Save"})),navigationAction:i.default.createElement(y.Link,{startIcon:i.default.createElement(p.default,null),to:"/settings/api-tokens"},_({id:"app.components.go-back",defaultMessage:"Back"}))}),i.default.createElement(s.ContentLayout,null,i.default.createElement(h.Stack,{size:6},Boolean(null===(r=a)||void 0===r?void 0:r.name)&&i.default.createElement(S.default,{apiToken:a.accessKey}),i.default.createElement(g.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},i.default.createElement(h.Stack,{size:4},i.default.createElement(m.Typography,{variant:"delta",as:"h2"},_({id:"Settings.apiTokens.details",defaultMessage:"Details"})),i.default.createElement(k.Grid,{gap:5},i.default.createElement(k.GridItem,{key:"name",col:6,xs:12},i.default.createElement(b.TextInput,{name:"name",error:c.name?_(null!==(n=c.name)&&void 0!==n&&n.id?c.name:{id:c.name,defaultMessage:c.name}):null,label:_({id:"Settings.apiTokens.form.name",defaultMessage:"Name"}),onChange:v,value:O.name,required:!0})),i.default.createElement(k.GridItem,{key:"description",col:6,xs:12},i.default.createElement(w.Textarea,{label:_({id:"Settings.apiTokens.form.description",defaultMessage:"Description"}),name:"description",error:c.description?_(null!==(o=c.description)&&void 0!==o&&o.id?c.description:{id:c.description,defaultMessage:c.description}):null,onChange:v},O.description)),i.default.createElement(k.GridItem,{key:"type",col:6,xs:12},i.default.createElement(E.Select,{name:"type",label:_({id:"Settings.apiTokens.form.type",defaultMessage:"Token type"}),value:O.type,error:c.type?_(null!==(u=c.type)&&void 0!==u&&u.id?c.type:{id:c.type,defaultMessage:c.type}):null,onChange:function(e){v({target:{name:"type",value:e}})}},i.default.createElement(E.Option,{value:"read-only"},_({id:"Settings.apiTokens.types.read-only",defaultMessage:"Read-only"})),i.default.createElement(E.Option,{value:"full-access"},_({id:"Settings.apiTokens.types.full-access",defaultMessage:"Full access"}))))))))))}))):i.default.createElement(L.default,{apiTokenName:null===(U=a)||void 0===U?void 0:U.name})};t.default=C},93004:(e,t,r)=>{"use strict";var n=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e,r&&r.set(e,a);return a}(r(53209)),o=r(79835);function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var u=a.object().shape({name:a.string(o.translatedErrors.string).required(o.translatedErrors.required),type:a.string(o.translatedErrors.string).oneOf(["read-only","full-access"]).required(o.translatedErrors.required),description:a.string().nullable()});t.default=u}}]);